// components/QRFrameRenderer.js - QR 코드 프레임 렌더링 컴포넌트
import React from 'react';
import { View, StyleSheet } from 'react-native';
import { SvgXml } from 'react-native-svg';
import StyledQRCode from './StyledQRCode';

// 프레임 SVG 데이터
const FRAME_SVG_DATA = {
  'envelope': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<polygon fill="#000000" points="864.31,551.09 980.65,652.92 869.6,740.63" />
<polygon fill="#000000" points="135.69,551.09 19.35,652.92 130.4,740.63" />
<path fill="#000000" d="M878.8,539.58V116.77c0-24.22-19.63-43.85-43.85-43.85H165.06c-24.22,0-43.85,19.63-43.85,43.85v422.81L1.38,632.35 v599.37c0,37.48,30.49,67.97,67.97,67.97h861.31c37.48,0,67.97-30.49,67.97-67.97V632.35L878.8,539.58z M962.69,689.55v458.25 L666.74,918.67L962.69,689.55z M958.9,647.04l-80.1,62.02V585.02L958.9,647.04z M165.06,105.8h669.88 c6.04,0,10.96,4.92,10.96,10.96v617.75L637.4,895.95l-94.56-73.21c-25.22-19.53-60.44-19.52-85.66,0l-94.56,73.21L154.1,734.52 V116.77C154.1,110.72,159.01,105.8,165.06,105.8z M333.26,918.67L37.31,1147.8V689.55L333.26,918.67z M121.2,709.05l-80.1-62.02 l80.1-62.02V709.05z M930.65,1263.75H69.35c-17.66,0-32.03-14.37-32.03-32.03v-38.47l441.86-342.09c12.26-9.5,29.4-9.5,41.66,0 l441.85,342.09v38.47C962.69,1249.38,948.32,1263.75,930.65,1263.75z" />
<text fill="#000000" font-size="90" x="50%" y="1160" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-weight="600">Scan me!</text>
</svg>`,
  'play-button': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M960,0H40A40,40,0,0,0,0,40V960a40,40,0,0,0,40,40H960a40,40,0,0,0,40-40V40A40,40,0,0,0,960,0Zm0,960H40V40H960Z"/>
<path fill="#000000" d="M960,1040H40a40,40,0,0,0-40,40v180a40,40,0,0,0,40,40H960a40,40,0,0,0,40-40V1080A40,40,0,0,0,960,1040ZM216,1201.86a12,12,0,0,1-12,12H108a12,12,0,0,1-12-12v-61.72a12,12,0,0,1,12-12h96a12,12,0,0,1,12,12Z"/>
<polygon fill="#000000" points="139.81 1150 139.81 1171 139.81 1192 158 1181.5 176.19 1171 158 1160.5 139.81 1150"/>
<text x="60%" y="1180" fill="#ffffff" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-size="90" font-weight="600">Scan me!</text>
</svg>`,
  'hand-phone': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M805.5,212.31c5.51,0,10,4.49,10,10v621h-631v-621c0-5.51,4.49-10,10-10H805.5 M805.5,182.31h-611 c-22.09,0-40,17.91-40,40v651h691v-651C845.5,200.22,827.59,182.31,805.5,182.31L805.5,182.31z" />
<path fill="#595959" d="M940.5,870h-881c-7.46,0-13.5-6.04-13.5-13.5l0,0c0-7.46,6.04-13.5,13.5-13.5h881c7.46,0,13.5,6.04,13.5,13.5 l0,0C954,863.96,947.96,870,940.5,870z" />
<path fill="#000000" d="M809,962H191c-50.81,0-92-41.19-92-92v0h802v0C901,920.81,859.81,962,809,962z" />
<path fill="#000000" d="M768.77,971.07c-14.11-16.13-35.01-19.44-54.67-9.2c-9.98-9.67-28.38-9.98-44.13-4.35c-5.68,2.03-75.15,29.56-97.52,38.43 c-8.35-14.2-25.85-19.47-32.86-21.57c-11.39-3.42-166.66-31.01-225.5-18.17c-20.04,4.37-173.71,61.92-180.24,64.37 c-4.65,1.74-7.01,6.93-5.27,11.59c1.75,4.66,6.94,7.01,11.59,5.27c44.16-16.55,162.17-60.23,177.76-63.63 c51.68-11.28,201.93,13.46,216.5,17.83c17.97,5.39,25.09,12.04,24.6,22.97c-0.57,12.63-7.05,18.07-25.67,21.56 c-12.73,2.39-120.55,10.82-161.02,13.87c-4.96,0.37-8.67,4.69-8.3,9.65c0.36,4.73,4.3,8.33,8.96,8.32c0.23,0,0.46-0.01,0.69-0.03 c2.63-0.2,31.33-2.36,64.04-4.99c8.42,4.51,41.14,22,55.26,29.06c21.87,10.93,36.25,2.87,54.47-7.34c2.17-1.22,4.46-2.5,6.87-3.81 c11.02-6.01,147.26-89.29,163.74-100.45c5.16-3.49,23.08-13.64,37.18,2.48c3.41,3.9,5.03,9.02,4.55,14.41 c-0.56,6.33-3.9,12.23-9.4,16.63c-6.76,5.41-171.11,134.74-191.44,148.59c-35.01,23.84-77.4,30.45-125.98,19.65 c-10.79-2.4-137.83-38.25-203.5-56.87c-1.85-0.53-3.83-0.44-5.64,0.24l-45,17c-4.65,1.76-7,6.95-5.24,11.6 c1.76,4.65,6.95,7,11.6,5.24l42.22-15.95c24.7,7,188.44,53.38,201.65,56.32c16.47,3.66,32.32,5.49,47.52,5.49 c34.3,0,65.28-9.3,92.5-27.83c21.31-14.51,186.19-144.32,192.56-149.41c9.37-7.5,15.08-17.83,16.08-29.09 C778.62,988.6,775.45,978.71,768.77,971.07z M545.69,1065.1c-2.47,1.35-4.82,2.66-7.05,3.91c-18.45,10.34-24.89,13.3-37.62,6.94 c-7-3.5-18.97-9.78-30.12-15.68c30.98-2.6,59.01-5.16,65.76-6.42c10.64-2,38.92-7.3,40.33-38.44c0.03-0.65,0.03-1.28,0.03-1.91 c34.65-13.74,94.17-37.3,99.01-39.03c7.65-2.73,15.7-3.29,21-1.9C660.36,995.71,555.27,1059.87,545.69,1065.1z" />
<polygon fill="#595959" points="0,1300 17.07,1300 195,1188 126,997 0,1032.71" />
<text fill="#000000" font-size="90" x="50%" y="98" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold">Scan me!</text>
</svg>`,
  'film-strip': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M747.71,174.5l54.27-40H479.4c1.7,3.78,0.6,8.36-2.87,10.92l-39.45,29.08H747.71z" />
<path fill="#000000" d="M778.05,174.5H860v223.42l40-29.48V174.5c0-22.09-17.91-40-40-40h-27.68L778.05,174.5z" />
<path fill="#000000" d="M140,282.07V174.5h266.74l54.27-40H399l-49.49,36.48c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66 c-2.95-4-2.1-9.64,1.91-12.58l29.83-21.99H198.71l-17.76,13.09c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66 c-2.53-3.44-2.25-8.07,0.41-11.18H140c-22.09,0-40,17.91-40,40v137.06L140,282.07z" />
<path fill="#000000" d="M887.36,1066.27c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66c-2.95-4-2.1-9.64,1.91-12.58l23.32-17.19 V894.5c0,0,0,0,0,0V787.19l-17.25,12.71c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66 c-2.95-4-2.1-9.64,1.91-12.58L900,764.82v-47.87l-10.96,8.08c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66 c-2.95-4-2.1-9.64,1.91-12.58L900,694.6V461.43l-1.7,1.26c-1.61,1.18-3.48,1.76-5.33,1.76c-2.76,0-5.49-1.27-7.25-3.66 c-2.95-4-2.1-9.64,1.91-12.58l12.38-9.13v-48.27l-40,29.48V894.5H140V304.43l-40,29.48v45.25l18.32-13.57 c3.99-2.96,9.63-2.12,12.59,1.87c2.96,3.99,2.12,9.63-1.87,12.59L100,401.57v237.09l22.15-16.33c4-2.95,9.63-2.1,12.58,1.91 c2.95,4,2.1,9.64-1.91,12.58L100,661.03v40.92l12.46-9.19c4-2.95,9.63-2.1,12.58,1.91c2.95,4,2.1,9.64-1.91,12.58L100,724.31 V894.5v78.3l11.04-8.14c4-2.95,9.64-2.1,12.58,1.91s2.1,9.64-1.91,12.58L100,995.16v131.34c0,22.09,17.91,40,40,40h20.43 l43.17-31.82c4-2.95,9.64-2.1,12.58,1.91s2.1,9.64-1.91,12.58l-23.51,17.33h307.58l26.37-19.44c4-2.95,9.63-2.1,12.58,1.91 c2.95,4,2.1,9.64-1.91,12.58l-6.71,4.95h273.1l38.99-28.74c4-2.95,9.64-2.1,12.58,1.91s2.1,9.64-1.91,12.58l-19.33,14.25H860 c22.09,0,40-17.91,40-40v-69.54L887.36,1066.27z" />
<text fill="#ffffff" font-size="90" x="50%" y="1038" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-weight="600">Scan me!</text>
</svg>`,
  'beer-mug': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M845.5,483.42v-151.2H469.88c-0.07,0.14-0.13,0.28-0.21,0.42c-6.44,11.55-14.36,21.2-24.61,29.58H815.5v121.1 L845.5,483.42z" />
<polygon fill="#000000" points="815.52,1065.96 815.52,918.86 845.52,918.76 845.52,1065.96" />
<path fill="#000000" d="M185.85,1021.88V362.22h110.12c-5.01-6.58-10.1-13.12-14.47-20.14c-2.05-3.29-3.92-6.56-5.63-9.86H155.85v689.65H185.85z" />
<path fill="#000000" d="M793.9,1193.76H207.45c-28.5,0-51.6-23.1-51.6-51.6V995.57H845.5v146.59C845.5,1170.66,822.4,1193.76,793.9,1193.76z" />
<path fill="#000000" d="M112.42,789.58c-29.16,0-70.21-26.14-70.21-84.26c0-39.83,21.83-82.36,39.38-116.53c6.76-13.18,13.16-25.63,16.82-35.23 c3.91-10.23-0.88-28.58-6.42-49.83c-9.01-34.54-21.35-81.86-9.78-140.39c10.1-51.08,36.67-89.2,78.98-113.27 c32.21-18.33,64.63-23.15,79.65-25.19c0.51-0.56,1.04-1.15,1.6-1.77c12.59-13.89,42.09-46.42,81.51-75.64 c50.34-37.32,99.13-56.24,145.02-56.24c48.39,0,94.67,15.41,133.85,44.56c29.64,22.05,44.91,44.25,45.55,45.19 c4.66,6.85,2.89,16.18-3.96,20.84c-6.85,4.66-16.18,2.88-20.84-3.96c-0.11-0.16-13.64-19.6-39.56-38.67 c-34.24-25.19-72.94-37.96-115.04-37.96c-62.15,0-130.89,41.06-204.3,122.03c-2.73,3.01-4.53,5-5.88,6.35 c-2.26,2.26-5.17,3.73-8.33,4.22c-1.12,0.17-2.53,0.36-4.18,0.59c-76.33,10.29-121.63,48.9-134.65,114.75 c-10.24,51.79,0.64,93.49,9.38,127c7.12,27.31,12.75,48.89,5.42,68.1c-4.26,11.14-11.01,24.3-18.16,38.23 c-16.07,31.3-36.06,70.25-36.06,102.83c0,41,27.09,54.26,40.21,54.26c19.69,0,34.06-11.33,42.7-33.67 c2.99-7.73,11.67-11.57,19.4-8.58c7.73,2.99,11.57,11.67,8.58,19.4c-7.2,18.63-17.93,32.66-31.89,41.68 C139.92,785.72,126.5,789.58,112.42,789.58z" />
<path fill="#000000" d="M368.57,407.74c-31.09,0-59.37-12.62-81.79-36.51c-16.56-17.64-24.19-35.46-24.51-36.21 c-3.22-7.63,0.35-16.43,7.98-19.65c7.63-3.23,16.43,0.35,19.65,7.98c0.04,0.09,6.23,14.27,19.39,28.03 c16.72,17.49,36.66,26.35,59.27,26.35c56.2,0,78.15-38.06,78.37-38.44c2.65-4.74,7.66-7.67,13.09-7.67h340.49 c6.13-20.2,6.29-41.46,0.39-62.06c-8.1-28.3-26.74-51.75-52.47-66.04c-25.74-14.28-55.5-17.69-83.8-9.59 c-17.64,5.05-33.84,14.46-46.83,27.23c-5.91,5.81-15.41,5.72-21.21-0.19c-5.81-5.91-5.72-15.41,0.19-21.21 c16.55-16.26,37.17-28.25,59.6-34.67c36-10.31,73.87-5.97,106.61,12.2c32.75,18.17,56.45,48.01,66.76,84.01 c8.67,30.31,7.04,61.75-4.72,90.93c-2.29,5.67-7.79,9.39-13.91,9.39H467.9C456.5,376.53,425.8,407.74,368.57,407.74z" />
<path fill="#000000" d="M340.45,250.11c-2.2,0-4.4-0.8-6.13-2.41c-3.64-3.39-3.84-9.08-0.46-12.72c33.35-35.84,84.99-78.24,141.54-76.76 c16.58,0.44,32.86,3.54,48.4,9.22c4.67,1.71,7.07,6.88,5.36,11.54c-1.71,4.67-6.87,7.07-11.54,5.36 c-13.7-5.01-28.07-7.75-42.69-8.13c-49.83-1.35-97.07,37.9-127.89,71.02C345.27,249.15,342.87,250.11,340.45,250.11z" />
<path fill="#000000" d="M925.1,948.81h-94.01v-30h94.01c24.57,0,44.56-19.99,44.56-44.56v-346.3c0-24.57-19.99-44.56-44.56-44.56h-94.01v-30h94.01 c41.11,0,74.56,33.45,74.56,74.56v346.3C999.67,915.36,966.22,948.81,925.1,948.81z" />
<path fill="#000000" d="M905.92,868.06h-89.83V534.13h89.83c14.36,0,26.04,11.68,26.04,26.04v281.85C931.97,856.38,920.28,868.06,905.92,868.06z M846.09,838.06h55.87V564.13h-55.87V838.06z" />
<text fill="#ffffff" font-size="90" x="50%" y="1097" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold">Scan me!</text>
</svg>`,
  'car': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 990">
<path fill="#595959" d="M846.16,749.44c-66.41,0-120.25,53.84-120.25,120.25s53.84,120.25,120.25,120.25 s120.25-53.84,120.25-120.25S912.57,749.44,846.16,749.44z M846.16,946.58c-42.46,0-76.88-34.42-76.88-76.88 c0-42.46,34.42-76.88,76.88-76.88s76.88,34.42,76.88,76.88C923.04,912.15,888.62,946.58,846.16,946.58z" />
<ellipse fill="#595959" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -367.1294 853.0522)" cx="846.16" cy="869.69" rx="38.5" ry="38.5" />
<path fill="#595959" d="M338.81,749.44c-66.41,0-120.25,53.84-120.25,120.25s53.84,120.25,120.25,120.25 s120.25-53.84,120.25-120.25S405.23,749.44,338.81,749.44z M338.81,946.58c-42.46,0-76.88-34.42-76.88-76.88 c0-42.46,34.42-76.88,76.88-76.88s76.88,34.42,76.88,76.88C415.7,912.15,381.27,946.58,338.81,946.58z" />
<ellipse fill="#595959" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -515.7283 494.3027)" cx="338.81" cy="869.69" rx="38.5" ry="38.5" />
<path fill="#000000" d="M1000,835.9c0-0.03,0-0.05,0-0.08c0-84.96-68.88-153.84-153.84-153.84s-153.84,68.88-153.84,153.84c0,0.03,0,0.05,0,0.08 H1000z" />
<path fill="#595959" d="M871.73,683.59l-103.67-218.7l12.65-2.85l-20.27-89.98c-2.93-13.02-15.86-21.19-28.88-18.26l-104.75,23.6 l18.91,83.92c3.69,16.37,19.95,26.65,36.31,22.96h0l35.33,213.86c2.78,16.84-2.73,33.98-14.79,46.05l-44.73,44.73 c-9.93,9.93-23.39,15.5-37.42,15.5h-73.36V670.42h31.4c6.81,0,12.33-5.52,12.33-12.33V610.6c0-6.81-5.52-12.33-12.33-12.33 H273.07c-6.81,0-12.33,5.52-12.33,12.33v27.58C184.09,669.1,130,744.18,130,831.9c0,5.35,0.2,10.66,0.6,15.91 c0.93,12.33,11.14,21.88,23.5,21.88h328.81h61.29h104.94c13.3,0,26.11-5.01,35.89-14.03l186.01-171.62l-0.12-0.16L871.73,683.59z" />
<path fill="#000000" d="M672.21,403.78l-91.07,20.52c-8.37,1.89-16.68-3.37-18.56-11.74l-0.99-4.4c-1.89-8.37,3.37-16.68,11.74-18.56 l91.07-20.52c8.37-1.89,16.68,3.37,18.56,11.74l0.99,4.4C685.83,393.59,680.58,401.9,672.21,403.78z" />
<path fill="#000000" d="M837.95,388.77c0-5.84-4.74-10.57-10.57-10.54c-8.38,0.03-18.86,0.25-20.93,0.25c-29.72,0-53.82,24.1-53.82,53.82 c0,29.72,24.1,53.82,53.82,53.82c2.07,0,12.55,0.22,20.93,0.25c5.84,0.02,10.57-4.71,10.57-10.54V388.77z" />
<path fill="#000000" d="M498.38,869.69c0-0.03,0-0.06,0-0.09c0-88.13-71.44-159.57-159.57-159.57S179.25,781.48,179.25,869.6 c0,0.03,0,0.06,0,0.09H498.38z" />
<path fill="#000000" d="M494.6,22.06c9.93,0,18,8.07,18,18v472.6H22V40.06c0-9.93,8.07-18,18-18H494.6 M494.6,0.06H40c-22.09,0-40,17.91-40,40 v494.6h534.6V40.06C534.6,17.97,516.69,0.06,494.6,0.06L494.6,0.06z" />
<path fill="#000000" d="M494.6,647.9H40c-22.09,0-40-17.91-40-40v-93.63h534.6v93.63C534.6,629.99,516.69,647.9,494.6,647.9z" />
<text fill="#ffffff" font-size="90" x="267" y="581" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold">Scan me!</text>
</svg>`,
  'coffee-cup': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M903.9,988.2H96.1c-7.54,0-13.65-6.11-13.65-13.65v-2.71c0-7.54,6.11-13.65,13.65-13.65H903.9 c7.54,0,13.65,6.11,13.65,13.65v2.71C917.54,982.09,911.43,988.2,903.9,988.2z" />
<path fill="#000000" d="M809,1078.7H191c-50.81,0-92-41.19-92-92v0h802v0C901,1037.51,859.81,1078.7,809,1078.7z" />
<path fill="#000000" d="M709.27,1002.88H290.73c-77.87,0-141.23-63.36-141.23-141.23V317.59c0-13.62,11.08-24.71,24.71-24.71h651.58 c13.63,0,24.71,11.08,24.71,24.71v106.36c83.29,7.6,148.76,77.83,148.76,163.08S933.79,742.5,850.5,750.1v111.55 C850.5,939.52,787.14,1002.88,709.27,1002.88z M179.5,322.88v538.77c0,61.33,49.9,111.23,111.23,111.23h418.54 c61.33,0,111.23-49.9,111.23-111.23V720.78h15c73.75,0,133.76-60,133.76-133.76s-60-133.76-133.76-133.76h-15V322.88H179.5z" />
<path fill="#000000" d="M835.5,675.23h-15V498.82h15c48.64,0,88.2,39.57,88.2,88.2S884.14,675.23,835.5,675.23z M850.5,530.78v112.49 c24.85-6.63,43.2-29.34,43.2-56.24S875.35,537.41,850.5,530.78z" />
<path fill="#000000" d="M364.45,253.68c-3.03,0-6.08-0.91-8.73-2.81c-6.73-4.83-8.28-14.2-3.45-20.93c6.52-9.14,16.88-27.82,16.88-38.99 c0-16.59-4.15-24.11-8.95-32.82c-5.03-9.13-10.74-19.49-10.74-37.14c0-36.3,24.26-56.21,25.29-57.04l18.79,23.38l0.13-0.11 c-0.58,0.49-14.21,12.23-14.21,33.77c0,9.94,2.79,15,7.01,22.66c5.65,10.24,12.67,22.99,12.67,47.3 c0,24.38-20.19,53.25-22.49,56.47C373.73,251.51,369.12,253.68,364.45,253.68z" />
<path fill="#000000" d="M490.14,253.68c-3.03,0-6.08-0.91-8.73-2.81c-6.73-4.83-8.28-14.2-3.45-20.93c6.52-9.14,16.88-27.82,16.88-38.99 c0-16.59-4.15-24.11-8.95-32.82c-5.03-9.13-10.74-19.49-10.74-37.14c0-36.3,24.26-56.21,25.29-57.04l18.79,23.38l0.13-0.11 c-0.58,0.49-14.21,12.23-14.21,33.77c0,9.94,2.79,15,7.01,22.66c5.65,10.24,12.67,22.99,12.67,47.3 c0,24.38-20.19,53.25-22.49,56.47C499.42,251.51,494.82,253.68,490.14,253.68z" />
<path fill="#000000" d="M615.84,253.68c-3.03,0-6.08-0.91-8.73-2.81c-6.73-4.83-8.28-14.2-3.45-20.93c6.52-9.14,16.88-27.82,16.88-38.99 c0-16.59-4.15-24.11-8.95-32.82c-5.03-9.13-10.74-19.49-10.74-37.14c0-36.3,24.26-56.21,25.29-57.04l18.79,23.38l0.13-0.11 c-0.58,0.49-14.21,12.23-14.21,33.77c0,9.94,2.79,15,7.01,22.66c5.65,10.24,12.67,22.99,12.67,47.3 c0,24.38-20.19,53.25-22.49,56.47C625.11,251.51,620.51,253.68,615.84,253.68z" />
<text fill="#000000" font-size="90" x="50%" y="1193" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold">Scan me!</text>
</svg>`,
  'smartphone': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1600">
<path fill="#000000" d="M960,0H40A40,40,0,0,0,0,40V1560a40,40,0,0,0,40,40H960a40,40,0,0,0,40-40V40A40,40,0,0,0,960,0ZM482,115h92a12,12,0,0,1,0,24H482a12,12,0,0,1,0-24Zm-48-8a20,20,0,1,1-20,20A20,20,0,0,1,434,107Zm66,1449.5a77.5,77.5,0,1,1,77.5-77.5A77.5,77.5,0,0,1,500,1556.5ZM960,1310a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V290a40,40,0,0,1,40-40H920a40,40,0,0,1,40,40Z"/>
<path fill="#000000" d="M500,1423a56,56,0,1,0,56,56A56.06,56.06,0,0,0,500,1423Zm0,104a48,48,0,1,1,48-48A48.05,48.05,0,0,1,500,1527Z"/>
<text x="50%" y="1225" fill="#000000" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-size="90" font-weight="600">Scan me!</text>
</svg>`,
  'receipt': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M933.2,1287.74h0a15.26,15.26,0,0,1-12.73-6.82L885.1,1227.7l-35.38,53.22a15.29,15.29,0,0,1-25.46,0l-35.37-53.22-35.37,53.22a15.29,15.29,0,0,1-25.46,0l-35.38-53.22-35.37,53.22a15.29,15.29,0,0,1-25.46,0l-35.38-53.22-35.37,53.22a15.29,15.29,0,0,1-25.46,0l-35.37-53.22-35.38,53.22a15.29,15.29,0,0,1-25.46,0l-35.37-53.22-35.37,53.22a15.28,15.28,0,0,1-12.73,6.82h0a15.24,15.24,0,0,1-12.72-6.82l-35.38-53.22-35.37,53.22a15.29,15.29,0,0,1-25.46,0l-35.38-53.22-35.37,53.22a15.29,15.29,0,0,1-25.46,0l-35.37-53.22-35.38,53.22a15.29,15.29,0,0,1-25.46,0l-42.93-64.59a10,10,0,0,1-1.67-5.54V59.43C10,32.18,31.71,10,58.4,10H941.6C968.29,10,990,32.18,990,59.43V1211.6a10,10,0,0,1-1.67,5.54l-42.4,63.78A15.26,15.26,0,0,1,933.2,1287.74Zm-861.94-17.9h0Zm621.42-65.94a15.26,15.26,0,0,1,12.73,6.82l35.38,53.22,35.37-53.22a15.29,15.29,0,0,1,25.46,0L837,1263.94l35.38-53.22a15.29,15.29,0,0,1,25.46,0l35.37,53.22,36.8-55.36V59.43C970,43.2,957.26,30,941.6,30H58.4C42.74,30,30,43.2,30,59.43V1207.77l37.33,56.17,35.38-53.22a15.29,15.29,0,0,1,25.46,0l35.37,53.22,35.38-53.22a15.25,15.25,0,0,1,12.72-6.82h0a15.24,15.24,0,0,1,12.72,6.82l35.38,53.22,35.37-53.22a15.29,15.29,0,0,1,25.46,0L356,1263.94l35.37-53.22a15.29,15.29,0,0,1,25.46,0l35.37,53.22,35.38-53.22a15.29,15.29,0,0,1,25.46,0l35.37,53.22,35.38-53.22a15.25,15.25,0,0,1,12.72-6.82h0a15.24,15.24,0,0,1,12.72,6.82l35.38,53.22L680,1210.72A15.26,15.26,0,0,1,692.68,1203.9Z"/>
<text x="50%" y="1045" fill="#000000" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-size="187" font-weight="600">Scan me!</text>
</svg>`,
  'calendar': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<path fill="#000000" d="M968.07,240.07c0-38.68-31.36-70.04-70.04-70.04H101.97c-38.68,0-70.04,31.36-70.04,70.04L0,1229.1 c0,38.68,31.36,70.04,70.04,70.04h859.91c38.68,0,70.04-31.36,70.04-70.04L968.07,240.07z M73.43,240.07 c0-15.74,12.8-28.54,28.54-28.54h796.05c15.74,0,28.54,12.8,28.54,28.54v824.59H73.43V240.07z" />
<polygon fill="#000000" points="352.81,0.85 273.07,79.83 273.07,247.82 352.81,247.82" />
<polygon fill="#000000" points="647.19,0.85 726.93,79.83 726.93,247.82 647.19,247.82" />
<rect fill="#595959" x="460.13" y="-106.46" transform="matrix(6.123234e-17 -1 1 6.123234e-17 459.272 540.728)" width="79.75" height="294.37" />
<text fill="#ffffff" font-size="90" x="50%" y="1197" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold" font-weight="600">Scan me!</text>
</svg>`,
  'cauldron': `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1300">
<ellipse fill="#595959" cx="500" cy="77.66" rx="84.18" ry="77.66" />
<ellipse fill="#000000" cx="500" cy="355.25" rx="431.82" ry="289.59" />
<ellipse fill="#000000" cx="500" cy="462.67" rx="449.3" ry="227.62" />
<path fill="#000000" d="M979.16,1103.64c0-31.96,0-88.8,0-88.8l-957.45-9.33c0,0-0.88,58.47-0.88,98.13C20.84,1212.08,235.37,1300,500,1300 S979.16,1212.08,979.16,1103.64z" />
<ellipse fill="#595959" cx="500" cy="966.52" rx="500" ry="253.31" />
<ellipse fill="#000000" cx="500" cy="940.02" rx="449.3" ry="227.62" />
<path fill="null" d="M847.48,955.96H152.52V301c0-22.09,17.91-40,40-40h614.96c22.09,0,40,17.91,40,40V955.96z" />
<path fill="#000000" d="M820.75,277.73c5.51,0,10,4.49,10,10v651.5h-661.5v-651.5c0-5.51,4.49-10,10-10H820.75 M820.75,247.73h-641.5 c-22.09,0-40,17.91-40,40v681.5h721.5v-681.5C860.75,265.64,842.84,247.73,820.75,247.73L820.75,247.73z" />
<path fill="#595959" d="M500,182.86c-276.14,0-500,113.41-500,253.31c0,68.07,53.01,129.87,139.25,175.39v-13.19 c-55.63-37.89-88.55-84.85-88.55-135.7c0-125.71,201.16-227.62,449.3-227.62s449.3,101.91,449.3,227.62 c0,50.85-32.92,97.81-88.55,135.7v13.19C946.99,566.05,1000,504.25,1000,436.17C1000,296.27,776.14,182.86,500,182.86z" />
<text fill="#ffffff" font-size="90" x="50%" y="1031" dominant-baseline="middle" text-anchor="middle" font-family="Inter-SemiBold">Scan me!</text>
</svg>`,
};

// QR 코드 위치 정보
const FRAME_QR_POSITIONS = {
  'envelope': { x: 154, y: 106, width: 692, height: 628, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'play-button': { x: 40, y: 40, width: 920, height: 920, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'hand-phone': { x: 184, y: 222, width: 631, height: 621, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'film-strip': { x: 140, y: 304, width: 760, height: 590, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'beer-mug': { x: 186, y: 362, width: 629, height: 600, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'car': { x: 22, y: 40, width: 512, height: 474, viewBoxWidth: 1000, viewBoxHeight: 990 },
  'coffee-cup': { x: 179, y: 323, width: 641, height: 640, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'smartphone': { x: 80, y: 290, width: 840, height: 980, viewBoxWidth: 1000, viewBoxHeight: 1600 },
  'receipt': { x: 30, y: 60, width: 940, height: 900, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'calendar': { x: 73, y: 240, width: 853, height: 824, viewBoxWidth: 1000, viewBoxHeight: 1300 },
  'cauldron': { x: 179, y: 278, width: 641, height: 660, viewBoxWidth: 1000, viewBoxHeight: 1300 },
};

/**
 * QR 코드와 프레임을 합성하여 렌더링하는 컴포넌트
 */
export default function QRFrameRenderer({
  frame,
  qrValue,
  qrStyle,
  size = 280,
  onCapture,
  onLayout,
}) {
  if (!frame || !frame.id || frame.id === 'none') {
    // 프레임이 없으면 QR 코드만 렌더링
    return (
      <View style={[styles.container, { width: size, height: size }]} onLayout={onLayout}>
        <View style={[styles.qrWrapper, { backgroundColor: qrStyle?.backgroundColor || '#fff' }]}>
          <StyledQRCode
            value={qrValue}
            size={size - 48}
            qrStyle={{ ...qrStyle, width: undefined, height: undefined }}
            onCapture={onCapture}
          />
        </View>
      </View>
    );
  }

  const frameSvg = FRAME_SVG_DATA[frame.id];
  const qrPosition = FRAME_QR_POSITIONS[frame.id];

  if (!frameSvg || !qrPosition) {
    // 프레임 데이터가 없으면 QR 코드만 렌더링
    return (
      <View style={[styles.container, { width: size, height: size }]} onLayout={onLayout}>
        <View style={[styles.qrWrapper, { backgroundColor: qrStyle?.backgroundColor || '#fff' }]}>
          <StyledQRCode
            value={qrValue}
            size={size - 48}
            qrStyle={{ ...qrStyle, width: undefined, height: undefined }}
            onCapture={onCapture}
          />
        </View>
      </View>
    );
  }

  // 프레임 비율 계산 (비정사각형 viewBox 지원)
  const viewBoxWidth = qrPosition.viewBoxWidth || 700;
  const viewBoxHeight = qrPosition.viewBoxHeight || 700;
  const aspectRatio = viewBoxWidth / viewBoxHeight;

  // size는 높이 기준, 너비는 비율에 맞게 계산
  const frameHeight = size;
  const frameWidth = Math.floor(size * aspectRatio);
  const scale = frameHeight / viewBoxHeight;

  // 프레임 내부 영역 (배경색이 채워질 영역)
  const bgAreaWidth = Math.floor(qrPosition.width * scale);
  const bgAreaHeight = Math.floor(qrPosition.height * scale);
  const bgX = Math.floor(qrPosition.x * scale);
  const bgY = Math.floor(qrPosition.y * scale);

  // QR 코드는 내부 영역 중앙에 정사각형으로 배치 (88%로 패딩 확보)
  const qrSize = Math.floor(Math.min(bgAreaWidth, bgAreaHeight) * 0.88);

  return (
    <View style={[styles.container, { width: frameWidth, height: frameHeight }]} onLayout={onLayout}>
      {/* 1. 배경색 + QR 코드 (flexbox 중앙 정렬) */}
      <View
        style={[
          styles.qrArea,
          {
            left: bgX,
            top: bgY,
            width: bgAreaWidth,
            height: bgAreaHeight,
            backgroundColor: qrStyle?.backgroundColor || '#ffffff',
          },
        ]}
      >
        <StyledQRCode
          value={qrValue}
          size={qrSize}
          qrStyle={{ ...qrStyle, backgroundColor: 'transparent', width: undefined, height: undefined, margin: 0 }}
          onCapture={onCapture}
        />
      </View>
      {/* 2. 프레임 SVG (가장 위) */}
      <SvgXml
        xml={frameSvg}
        width={frameWidth}
        height={frameHeight}
        style={styles.frameSvg}
        pointerEvents="none"
      />
    </View>
  );
}

// 프레임 SVG 데이터 export (다른 컴포넌트에서 사용 가능)
export { FRAME_SVG_DATA, FRAME_QR_POSITIONS };

const styles = StyleSheet.create({
  container: {
    position: 'relative',
  },
  frameSvg: {
    position: 'absolute',
    top: 0,
    left: 0,
  },
  qrArea: {
    position: 'absolute',
    alignItems: 'center',
    justifyContent: 'center',
  },
  qrWrapper: {
    padding: 24,
    borderRadius: 20,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 4 },
    shadowOpacity: 0.15,
    shadowRadius: 12,
    elevation: 6,
  },
  qrBehind: {
    position: 'absolute',
    overflow: 'hidden',
  },
});
